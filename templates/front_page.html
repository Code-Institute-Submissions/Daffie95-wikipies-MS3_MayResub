{% extends "base.html" %}
{% block content %}

<h3 class="teal-text darken-2 center-align">All Recipes</h3>

<div class="row card-panel teal darken-4">
    <form action="{{ url_for('search') }}" method="post" class="col s12">
        <div class="row valign-wrapper center-align">
            <div class="input-field col s12 m8">
                <i class="material-icons white-text prefix">search</i><input type="text" name="search" id="search"
                    class="validate" required>
                <label for="search">Recipe Search</label>
            </div>
            <div class="col s12 m3">
                <a href="{{ url_for('frontpage') }}" class="red btn">Clear</a>
                <button type="submit" class="green lighten-1 btn">
                    Search
                </button>
            </div>
        </div>
    </form>
</div>


{% if recipes|length > 0 %}
<!-- collapsible to store recipes -->
<ul class="collapsible popout">
    {% for recipe in recipes %}
    <li>
        <div class="collapsible-header white-text teal lighten-2 col s12">
            <div class="col s3">
                <!-- button for future edit use -->
                <a href="{{ url_for('edit_recipe'), recipe_id=_.recipe_id }}" class="btn-small waves-effect waves-light green">Edit</a>
            </div>
            <div class="col s9">
                <strong>{{ recipe.recipe_name|capitalize }}</strong> Written by: {{ recipe.created_by|capitalize }}
                <!-- Jinja statements to conditionally check for allergens -->
                {% if recipe.gluten == "on" %}
                    <i class="material-icons white-text tooltipped" data-position="top"
                    data-tooltip="Contains Gluten">looks_one</i>
                    {% if recipe.lactose == "on" %}
                        <i class="material-icons white-text tooltipped" data-position="top"
                        data-tooltip="Contains Lactose">looks_two</i>
                        {% if recipe.nuts == "on" %}
                            <i class="material-icons white-text tooltipped" data-position="top"
                            data-tooltip="Contains Nuts">looks_3</i>
                            {% if recipe.peanuts == "on" %}
                                <i class="material-icons white-text tooltipped" data-position="top"
                                data-tooltip="Contains Peanuts">looks_4</i>
                                {% if recipe.shellfish == "on" %}
                                    <i class="material-icons white-text tooltipped" data-position="top"
                                    data-tooltip="Contains Shellfish">looks_5</i>
                                    {% if recipe.fish == "on" %}
                                        <i class="material-icons white-text tooltipped" data-position="top"
                                        data-tooltip="Contains Fish">looks_6</i>
                                    {% endif %}
                                {% endif %}
                            {% endif %}
                        {% endif %}
                    {% endif %}
                {% endif %}
            </div>
        </div>
        <!-- collapsible body returns category, description, and ingredients -->
        <div class="collapsible-body">
            <strong>This is a {{ recipe.category|capitalize }} recipe</strong>
            <h6>Steps:</h6>
            <p>{{ recipe.recipe_desc }}</p>
            <strong>ingredients needed:</strong>
            <p>{{ recipe.ingredients }}</p>
        </div>
    </li>
    {% endfor %}
</ul>
<!-- else function when no searches were found -->
{% else %}
<h4 class="red-text text-lighten-1 center align">No Recipes Found</h4>
{% endif %}









{% endblock %}